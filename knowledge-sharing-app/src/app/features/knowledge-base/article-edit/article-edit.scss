/* Article Edit Component Styles */
.article-edit-container {
  min-height: 100vh;
  background-color: #fafafa;
  display: flex;
  flex-direction: column;

  /* Loading State */
  app-loading-spinner {
    margin: 2rem auto;
  }
}

/* Editor Header */
.editor-header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: white;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

  .editor-toolbar {
    background: white;
    color: #333;
    min-height: 64px;

    .toolbar-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 1rem;

      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 0.5rem;

        .breadcrumb-text {
          font-size: 1.1rem;
          font-weight: 500;
          color: #333;
        }
      }

      .editor-actions {
        display: flex;
        align-items: center;
        gap: 1rem;

        .auto-save-indicator {
          display: flex;
          align-items: center;
          gap: 0.25rem;
          color: #ff9800;
          font-size: 0.875rem;

          mat-icon {
            font-size: 1rem;
            width: 1rem;
            height: 1rem;
          }
        }

        button {
          display: flex;
          align-items: center;
          gap: 0.5rem;

          mat-spinner {
            margin-right: 0.5rem;
          }
        }
      }
    }
  }
}

/* Main Editor Content */
.editor-content {
  flex: 1;
  padding: 2rem;
  max-width: 1200px;
  margin: 0 auto;
  width: 100%;

  .article-form {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }
}

/* Article Header Card */
.article-header-card {
  .title-field {
    width: 100%;
    
    input {
      font-size: 1.5rem;
      font-weight: 500;
      line-height: 1.4;
    }
  }

  .metadata-row {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 2rem;
    align-items: center;
    margin-top: 1rem;

    mat-form-field {
      flex: 1;
    }

    .publication-toggle {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 500;
    }
  }

  .tags-section {
    margin-top: 1.5rem;

    h3 {
      margin: 0 0 1rem 0;
      font-size: 1.1rem;
      font-weight: 500;
      color: #333;
    }

    .tags-input-container {
      margin-bottom: 1rem;

      .tag-input {
        width: 100%;
      }
    }

    .selected-tags {
      mat-chip-set {
        gap: 0.5rem;
      }

      mat-chip {
        background-color: #e3f2fd;
        color: #1976d2;
        font-size: 0.875rem;

        &:hover {
          background-color: #bbdefb;
        }

        mat-icon {
          color: #1976d2;
          cursor: pointer;

          &:hover {
            color: #d32f2f;
          }
        }
      }
    }
  }

  .excerpt-field {
    width: 100%;
    margin-top: 1rem;

    textarea {
      min-height: 80px;
      resize: vertical;
    }
  }
}

/* Content Editor Card */
.content-editor-card {
  mat-card-header {
    margin-bottom: 1rem;

    mat-card-title {
      font-size: 1.25rem;
      font-weight: 500;
    }

    mat-card-subtitle {
      color: #666;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
  }

  .editor-container {
    position: relative;

    quill-editor {
      ::ng-deep {
        .ql-container {
          min-height: 400px;
          font-size: 1rem;
          line-height: 1.6;
        }

        .ql-editor {
          padding: 1.5rem;

          &.ql-blank::before {
            color: #999;
            font-style: italic;
          }

          h1, h2, h3, h4, h5, h6 {
            margin: 1.5rem 0 1rem 0;
            line-height: 1.3;
          }

          p {
            margin: 1rem 0;
          }

          ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
          }

          blockquote {
            border-left: 4px solid #ddd;
            margin: 1rem 0;
            padding-left: 1rem;
            color: #666;
            font-style: italic;
          }

          code {
            background-color: #f5f5f5;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
          }

          pre {
            background-color: #f5f5f5;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 1rem 0;
          }
        }

        .ql-toolbar {
          border-top: 1px solid #ddd;
          border-left: 1px solid #ddd;
          border-right: 1px solid #ddd;
          background-color: #fafafa;

          .ql-formats {
            margin-right: 1rem;
          }

          button {
            width: 28px !important;
            height: 28px !important;
            padding: 3px !important;
            
            &:hover,
            &:focus {
              color: #1976d2;
            }

            svg {
              width: 18px !important;
              height: 18px !important;
            }

            .ql-stroke {
              stroke-width: 2 !important;
            }

            .ql-fill {
              fill: currentColor !important;
            }
          }

          .ql-picker {
            width: auto !important;
            height: 28px !important;
            line-height: 28px !important;

            .ql-picker-label {
              height: 28px !important;
              line-height: 28px !important;
              padding: 0 8px !important;
            }
          }

          .ql-active {
            color: #1976d2 !important;
          }
        }

        .ql-container {
          border-bottom: 1px solid #ddd;
          border-left: 1px solid #ddd;
          border-right: 1px solid #ddd;
        }
      }
    }

    .content-error {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #d32f2f;
      font-size: 0.875rem;
      margin-top: 0.5rem;

      mat-icon {
        font-size: 1rem;
        width: 1rem;
        height: 1rem;
      }
    }
  }
}

/* Preview Card */
.preview-card {
  background-color: #fff;
  border: 1px solid #e0e0e0;

  .preview-content {
    .preview-title {
      font-size: 2rem;
      font-weight: 600;
      line-height: 1.3;
      margin: 0 0 1rem 0;
      color: #333;
    }

    .preview-meta {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;

      .preview-category {
        background-color: #e3f2fd;
        color: #1976d2;
        padding: 0.25rem 0.75rem;
        border-radius: 16px;
        font-size: 0.875rem;
        font-weight: 500;
      }

      .preview-status {
        padding: 0.25rem 0.75rem;
        border-radius: 16px;
        font-size: 0.875rem;
        font-weight: 500;

        &.published {
          background-color: #e8f5e8;
          color: #2e7d32;
        }

        &.draft {
          background-color: #fff3e0;
          color: #f57c00;
        }
      }
    }

    .preview-tags {
      margin-bottom: 1rem;

      .preview-tag {
        display: inline-block;
        background-color: #f5f5f5;
        color: #666;
        padding: 0.25rem 0.5rem;
        border-radius: 12px;
        font-size: 0.8rem;
        margin-right: 0.5rem;
        margin-bottom: 0.25rem;
      }
    }

    .preview-excerpt {
      font-style: italic;
      color: #666;
      font-size: 1.1rem;
      line-height: 1.5;
      margin: 1rem 0 2rem 0;
      padding: 1rem;
      background-color: #f9f9f9;
      border-left: 4px solid #1976d2;
    }

    .preview-content-body {
      line-height: 1.7;
      color: #333;

      h1, h2, h3, h4, h5, h6 {
        margin: 2rem 0 1rem 0;
        line-height: 1.3;
      }

      p {
        margin: 1rem 0;
      }

      ul, ol {
        margin: 1rem 0;
        padding-left: 2rem;
      }

      blockquote {
        border-left: 4px solid #ddd;
        margin: 1.5rem 0;
        padding-left: 1rem;
        color: #666;
        font-style: italic;
      }

      code {
        background-color: #f5f5f5;
        padding: 0.2em 0.4em;
        border-radius: 3px;
        font-family: 'Courier New', monospace;
      }

      pre {
        background-color: #f5f5f5;
        padding: 1rem;
        border-radius: 4px;
        overflow-x: auto;
        margin: 1.5rem 0;
      }

      img {
        max-width: 100%;
        height: auto;
        border-radius: 4px;
        margin: 1rem 0;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 1.5rem 0;

        th, td {
          padding: 0.75rem;
          text-align: left;
          border-bottom: 1px solid #ddd;
        }

        th {
          background-color: #f5f5f5;
          font-weight: 600;
        }
      }
    }
  }
}

/* Bottom Actions */
.bottom-actions {
  position: sticky;
  bottom: 0;
  background: white;
  border-top: 1px solid #e0e0e0;
  margin-top: 2rem;

  mat-card {
    margin: 0;
    border-radius: 0;
    box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);

    mat-card-content {
      padding: 1rem 2rem;

      .action-buttons {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;

        .primary-actions {
          display: flex;
          gap: 1rem;

          button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
          }
        }
      }
    }
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .editor-content {
    padding: 1rem;
  }

  .editor-header {
    .toolbar-content {
      flex-direction: column;
      gap: 1rem;
      padding: 1rem;

      .breadcrumb,
      .editor-actions {
        width: 100%;
        justify-content: space-between;
      }

      .editor-actions {
        flex-wrap: wrap;
        gap: 0.5rem;
      }
    }
  }

  .article-header-card {
    .metadata-row {
      grid-template-columns: 1fr;
      gap: 1rem;

      .publication-toggle {
        justify-self: start;
      }
    }
  }

  .content-editor-card {
    .editor-container {
      quill-editor {
        ::ng-deep {
          .ql-container {
            min-height: 300px;
          }

          .ql-editor {
            padding: 1rem;
          }

          .ql-toolbar {
            .ql-formats {
              margin-right: 0.5rem;
            }
          }
        }
      }
    }
  }

  .preview-card {
    .preview-content {
      .preview-title {
        font-size: 1.5rem;
      }

      .preview-meta {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
    }
  }

  .bottom-actions {
    mat-card-content {
      padding: 1rem;

      .action-buttons {
        flex-direction: column;
        gap: 1rem;

        .primary-actions {
          width: 100%;
          justify-content: space-between;

          button {
            flex: 1;
          }
        }
      }
    }
  }
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
  .article-edit-container {
    background-color: #121212;
    color: #e0e0e0;
  }

  .editor-header {
    .editor-toolbar {
      background: #1e1e1e;
      color: #e0e0e0;

      .breadcrumb-text {
        color: #e0e0e0;
      }

      .auto-save-indicator {
        color: #ff9800;
      }
    }
  }

  .article-header-card,
  .content-editor-card,
  .preview-card,
  .bottom-actions mat-card {
    background-color: #1e1e1e;
    color: #e0e0e0;
  }

  .preview-content {
    .preview-title {
      color: #e0e0e0;
    }

    .preview-excerpt {
      background-color: #2e2e2e;
      color: #b0b0b0;
    }

    .preview-content-body {
      color: #e0e0e0;

      blockquote {
        color: #b0b0b0;
      }

      code {
        background-color: #2e2e2e;
        color: #e0e0e0;
      }

      pre {
        background-color: #2e2e2e;
        color: #e0e0e0;
      }
    }
  }
}

/* Animation and Transitions */
.article-edit-container {
  * {
    transition: all 0.2s ease-in-out;
  }
}

button:hover {
  transform: translateY(-1px);
}

mat-card {
  transition: box-shadow 0.2s ease-in-out;

  &:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
}

/* Custom Scrollbar */
.editor-container,
.preview-content-body {
  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;

    &:hover {
      background: #a1a1a1;
    }
  }
}

/* Focus States */
mat-form-field.mat-focused {
  .mat-form-field-outline-thick {
    color: #1976d2;
  }
}

/* Error States */
.mat-form-field.mat-form-field-invalid {
  .mat-form-field-outline-thick {
    color: #d32f2f;
  }
}

/* Delete Action Styling */
.delete-action {
  color: #d32f2f !important;

  mat-icon {
    color: #d32f2f;
  }

  &:hover {
    background-color: rgba(211, 47, 47, 0.1);
  }
}

/* Global Icon Size Control */
.article-edit-container {
  mat-icon {
    font-size: 24px !important;
    width: 24px !important;
    height: 24px !important;
    line-height: 24px !important;
  }

  // Smaller icons for suffix/prefix in form fields
  .mat-form-field mat-icon[matSuffix],
  .mat-form-field mat-icon[matPrefix] {
    font-size: 20px !important;
    width: 20px !important;
    height: 20px !important;
    line-height: 20px !important;
  }

  // Chip remove icons should be smaller
  .mat-chip mat-icon[matChipRemove] {
    font-size: 16px !important;
    width: 16px !important;
    height: 16px !important;
    line-height: 16px !important;
  }

  // Error icons should be small
  .content-error mat-icon,
  .auto-save-indicator mat-icon {
    font-size: 16px !important;
    width: 16px !important;
    height: 16px !important;
    line-height: 16px !important;
  }
}
